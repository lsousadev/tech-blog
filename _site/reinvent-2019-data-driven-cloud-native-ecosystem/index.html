<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>AWS re:Invent 2019: Data-Driven, Cloud-Native Ecosystem | Tech Notebook by Lucas</title>
<meta name="generator" content="Jekyll v4.2.1">
<meta property="og:title" content="AWS re:Invent 2019: Data-Driven, Cloud-Native Ecosystem">
<meta name="author" content="Lucas">
<meta property="og:locale" content="en_US">
<meta name="description" content="This blog was created for note-keeping purposes, not educational. Browse at your own peril.">
<meta property="og:description" content="This blog was created for note-keeping purposes, not educational. Browse at your own peril.">
<link rel="canonical" href="https://lucas-sousa.com/reinvent-2019-data-driven-cloud-native-ecosystem/">
<meta property="og:url" content="https://lucas-sousa.com/reinvent-2019-data-driven-cloud-native-ecosystem/">
<meta property="og:site_name" content="Tech Notebook by Lucas">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-01-08T00:00:00-08:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="AWS re:Invent 2019: Data-Driven, Cloud-Native Ecosystem">
<script type="application/ld+json">
{"@type":"BlogPosting","url":"https://lucas-sousa.com/reinvent-2019-data-driven-cloud-native-ecosystem/","headline":"AWS re:Invent 2019: Data-Driven, Cloud-Native Ecosystem","dateModified":"2022-01-08T00:00:00-08:00","datePublished":"2022-01-08T00:00:00-08:00","author":{"@type":"Person","name":"Lucas"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lucas-sousa.com/reinvent-2019-data-driven-cloud-native-ecosystem/"},"description":"This blog was created for note-keeping purposes, not educational. Browse at your own peril.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" href="/assets/images/favicons/devops.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://lucas-sousa.com/feed.xml" title="Tech Notebook by Lucas">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="Tech Notebook by Lucas" src="/assets/images/favicons/devops.png" onerror="this.style.display='none'">
  Tech Notebook by Lucas
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/">HOME</a><a class="page-link" href="/archives/">ARCHIVES</a><a class="page-link" href="/categories/">CATEGORIES</a><a class="page-link" href="/tags/">TAGS</a><a class="page-link" href="/about/">ABOUT</a>









<span class="page-link">



<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('on' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">AWS re:Invent 2019: Data-Driven, Cloud-Native Ecosystem</h1>
  <h2 class="post-subtitle">Note Repository</h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2022-01-08T00:00:00-08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Jan 08, 2022
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 8 mins</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#aws">#aws</a><a class="post-tag" href="/tags.html#re:invent">#re:invent</a><a class="post-tag" href="/tags.html#cloud">#cloud</a><a class="post-tag" href="/tags.html#automotive">#automotive</a><a class="post-tag" href="/tags.html#bmw">#bmw</a><a class="post-tag" href="/tags.html#iot">#iot</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <!--üî¥ üü† ‚ö´ ‚ö™ üü£ üü¢ üü° üîµ-->

<p><a href="https://youtu.be/9fH3y5p8ewE">Presentation Video</a></p>

<h2 id="characteristics-of-automotive-ecosystem">Characteristics of Automotive Ecosystem</h2>

<ul>
  <li>Connectivity: on-demand services</li>
  <li>Autonomous Driving: push towards full autonomy. Lots of sensors, camera readers, up to 25TB/day of data</li>
  <li>Multimodal Mobility: point A to point B</li>
  <li>Marketplace: whole list of contextual, local, location-based services like food ordering &amp; payment, hotel reservation, offer from dealership</li>
  <li>Electrification: very pervasive on ride-sharing and micro mobility (scooters, bikes) solutions</li>
  <li>Subscriptions: car makers are becoming software and service companies (eg: make cars for subscription)</li>
</ul>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/why_enterprises_need_data_lakes.png" alt='"Why Enterprises Need Data Lakes"'></p>

<h2 id="three-main-features-of-data-lakes">Three main features of Data Lakes</h2>

<ol>
  <li>Single point of truth: work on same data without moving it around, from R&amp;D to manufacturing to logistics to after-sales. Democratizing the data usage in the enterprise.</li>
  <li>Support various data formats: from rational to non-rational data. Car sensor data, images from autonomous driving, etc.</li>
  <li>Scales storage and compute individually.</li>
</ol>

<h2 id="intro-to-bmws-solution">Intro to BMW‚Äôs Solution</h2>

<ul>
  <li>BMW Intelligent Personal Assistant (IBM Assistant) - ‚ÄúSoul of your BMW‚Äù - focused on becoming more connected and more contextualized</li>
  <li>Has to be properly integrated with Manufacturing, Logistics, Customer Service, After-Sales</li>
  <li>They want to transform BMW into a truly data-driven company</li>
  <li>Driven by:
    <ul>
      <li>Data &amp; AI</li>
      <li>Cloud stack: pooling and providing the right tools and frameworks to work with data in most effective ways - leverage good, complete cloud stack - move away from heterogeneous landscape</li>
      <li>Emerging tech: novel/unproven tech (eg: natural language processing, blockchain, etc) shouldn‚Äôt be avoided</li>
    </ul>
  </li>
</ul>

<h2 id="motivation">Motivation</h2>

<p>(Why BMW started aggressively pursuing cloud solutions in 2019)</p>

<ul>
  <li>2014: Big Data journey - Hadoop + Kafka stack (fueling data transformation on top of the Hadoop ecosystem). Ingested both IoT and Product (ERP, CRM, OLTP) data via Kafka or Spark.</li>
  <li>Eventually purpose-built databases started being introduced to speed up workloads (eg: PostgreSQL) trying to satisfy customer requirements</li>
  <li>Lastly, to harness the results of the data analysis, in 2016 a K8s cluster was introduced.</li>
</ul>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/traditional_big_data_landscape.png" alt='"Traditional Big Data Landscape"'></p>

<p>Very heterogeneous landscape. Consequences:</p>

<ul>
  <li>Only fractions of critical organization‚Äôs data were able to be ingested.</li>
  <li>Bottlenecks were prominent. There were central teams taking care of data ingestion, no self-service. Scaling workforce didn‚Äôt help.</li>
  <li>Move to purpose-built sandboxes for experiments (eg: Docker, Jupiter Notebooks, traditional solutions, etc).</li>
  <li>The number of prototypes spinning out in different environments was growing exponentially bigger than products being made.</li>
</ul>

<p>The whole (small) DevOps team had full and trained responsibilities over all the components. Those reasons led BMW to move to the cloud.</p>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/lift_think_and_shift.png" alt='"Lift, Think, and Shift"'></p>

<p>Lift, Think, &amp; Shift: re-architecture of major parts of the on-premises platform into the cloud, not just duplicate the combobulated environment it currently had. Move of major parts into AWS primarily built upon cloud-native building blocks and IaaC</p>

<p>That shift allowed BMW to focus more on the differentiating ‚Äúbits and pieces‚Äù (services) and the quality of their data rather than making sure the tools, platforms, and infrastructures worked and communicated properly</p>

<p>Hypothesis that supported the move to the cloud:</p>

<ul>
  <li>BMW will not be able to keep up with the radical pace of innovation AWS has in their data lakes services portfolio</li>
  <li>making sure that BMW understands, curates, transforms, and leverages their data as opposed to wasting time with anything else</li>
</ul>

<h2 id="bmw-groups-cloud-data-hub">BMW Group‚Äôs Cloud Data Hub</h2>

<p>(Platform design of the Cloud Data Hub built upon AWS)</p>

<p>Three main premises:</p>

<ol>
  <li>Enable a very quick infrastructure setup in different regions while maintaining high security standards and complying with regulations</li>
  <li>Support quick data integration for a wide array of datasets (both streaming and relational)</li>
  <li>Provide consistent means of how people will interact with the data and how identities are managed across the platform (eg: SSO, making sure it translates well into the enterprise scenarios)</li>
</ol>

<p>Three-layered approach:</p>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/three_layer_approach.png" alt='"Three Layered Approach"'></p>

<ol>
  <li>Real-Time Zone: keeps cached copies of real-world objects (eg: customer vehicles) for fast access to non-historic sized data needed for inference of ML models</li>
  <li>Insight Zone: historicized versions of real-time objects and also plays well with already existing relational databases (OLTP, data warehouses, etc)</li>
  <li>Unified API: collection of restful API that makes interaction of people &amp; systems w/ data easy, and gives the ability to expose both real-time and relational data very effectively</li>
</ol>

<p>Three important things about data platform:</p>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/three_important_data_platform_facts.png" alt='"Three Important Data Platform Facts"'></p>

<ul>
  <li>Democratization: provide easy access to both bounded and unbounded data. Single point of truth for any kind of data analytics. Enable data stewards to intuitively look at what‚Äôs already there. Introducing a data catalog built in-house upon the existing Cloud Data Hub for exploration</li>
  <li>Modularity: key to enable broader community to work with the platform. Allows users to bring their own building blocks too</li>
  <li>Lean Ops: avoid putting all the effort and energy into the system, let AWS handle infrastructure. Fast-paced environment to drive innovation</li>
</ul>

<h2 id="cloud-data-hub-gui">Cloud Data Hub GUI</h2>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/bmw_cloud_data_hub_gui.png" alt='"BMW Cloud Data Hub GUI"'></p>

<p>Client Flow:</p>

<ol>
  <li>Login</li>
  <li>Select Role</li>
  <li>Launch CDH</li>
  <li>Make queries</li>
</ol>

<p>Providing Data: very difficult, many ETL tools but always hits limitations and bottlenecks when implementing.</p>

<ul>
  <li>Option 1: Terraform template</li>
  <li>Option 2: Manually via Hub (config &amp; auth, ingest source, scheduling)</li>
</ul>

<p>Older flow used EMR. Newer flow uses Lambda, CDK, CloudFormation orchestration.</p>

<h3 id="data-consumption">Data Consumption</h3>

<ul>
  <li>Consumer requirements for data consumption: SPARK. Many data analytics points start with Spark.</li>
  <li>Cloud Data Hub gives customers the ability to spin up a customizable Sage Maker stack with an EMR cluster. You can also open a Jupyter Notebook that directly interacts with the EMR cluster.</li>
</ul>

<h3 id="data-ingestion">Data Ingestion</h3>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/data_ingestion_part_1.png" alt='"Data Ingestion - Part 1"'></p>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/data_ingestion_part_2.png" alt='"Data Ingestion - Part 2"'></p>

<p>DATA.BMW.CLOUD: Store all bounded and unbounded data, build tools on top of that (eg: BMW CDH Portal) to give great and easy customer experience.</p>

<p>Data Provider: very easy and customizable to bring data into CDH:</p>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/data_provider_code.png" alt='"Data Provider Code"'></p>

<h3 id="whats-provisioned-by-the-terraform-module-inside-the-data-provider">What‚Äôs provisioned by the Terraform module inside the Data Provider</h3>

<ul>
  <li>
    <p>Bounded data:</p>

    <p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/ingestion_module_bounded_data.png" alt='"Ingestion Module - Bounded Data"'></p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">Glue Trigger</code>: triggers the Glue ETL</li>
      <li>
<code class="language-plaintext highlighter-rouge">Glue ETL</code>: has access to on-prem DB since it‚Äôs inside Private VPC. Uses:
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">CloudWatch</code>: log metrics</li>
          <li>
<code class="language-plaintext highlighter-rouge">Secrets Manager</code>: DB secrets</li>
          <li>
<code class="language-plaintext highlighter-rouge">Local Glue Data Catalog</code>: metadata</li>
        </ul>
      </li>
      <li>
<code class="language-plaintext highlighter-rouge">Source S3 bucket</code>: stores all data. Resources for new data created via API</li>
      <li>
<code class="language-plaintext highlighter-rouge">Glue DC Sync &amp; Global Glue DC</code>: all metadata stored and made available to consumer accounts</li>
    </ul>
  </li>
  <li>
    <p>Unbounded Data:</p>
  </li>
</ul>

<p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/ingestion_module_ingredients.png" alt='"Ingestion Module - Ingredients"'></p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">Kinesis</code>: Receives data from cloud-native data providers
    <ul>
      <li>1-2 minutes latency from writing data to Kinesis until it is visible in Athena</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">Firehose</code>: Batch data to S3</li>
  <li>
<code class="language-plaintext highlighter-rouge">Lambda</code>: transforms data</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Fargate</code>: Imports legacy Kafka topics into Kinesis</p>

    <p><img src="/assets/images/2022-01-08-reinvent-2019-data-driven-cloud-native-ecosystem/ingestion_module_unbounded_data.png" alt='"Ingestion Module - Unbouded Data"'></p>
  </li>
  <li>Lambda Prep &amp; S3 Prep Bucket: Event data enriched with data such as vehicle/customer data.</li>
  <li>Bucket Policies in the Source Bucket only apply to the objects owned by the bucket owner. That makes it hard for the Source Bucket to give access to consumer accounts. The solution is to use STS and roles when allowing Data Providers to feed data to the bucket.</li>
  <li>For services that aren‚Äôt ‚Äúrole-aware‚Äù like Firehose, the workaround is to trigger an event on the upload, which uses SNS and SQS to start a Lambda function that fixes ownership of the object in the bucket and before passing the data along the pipeline to be enriched.</li>
</ul>

<h2 id="cloud-data-hub-highlights">Cloud Data Hub Highlights</h2>

<ol>
  <li>Faster and more real-time: increase latency (eg: introduce Kinesis Data Analytics)</li>
  <li>Metadata and lineage: improve metadata handling and data lineage tracking (from source to semantic layer), not currently reachable through API</li>
  <li>Search in (meta-)data: improve indexing</li>
  <li>Building blocks: improve customer service by building more blocks for data providers (eg: elasticsearch integration)</li>
  <li>Increased self-service: more features to service portal (eg: make Terraform modules available on UI)</li>
</ol>

<h2 id="data-consumers">Data Consumers</h2>

<ul>
  <li>Where data scientists and analysts use consumer accounts and advanced analytics services such as Sage Maker. It‚Äôs important that consumers have the freedom to design their own custom infrastructure along with the available building blocks and templates.</li>
  <li>Consumer account can also use SNS topic to trigger the processing once new data arrives.</li>
</ul>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/kubernetes-basics/" title="Kubernetes Basics">Kubernetes Basics</a><a class="next" href="/aws-cloud-practitioner-notes/" title="AWS Cloud Practitioner Certification Notes">AWS Cloud Practitioner Certification Notes</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/aws-cloud-practitioner-notes/" title="AWS Cloud Practitioner Certification Notes">AWS Cloud Practitioner Certification Notes</a></li>
<li><a class="post-link" href="/hosting-safe-static-website-aws-ui/" title="AWS Cloud Practitioner Certification Notes">Hosting a Safe Static Website on AWS (UI Version)</a></li>
<li><a class="post-link" href="/kubernetes-basics/" title="AWS Cloud Practitioner Certification Notes">Kubernetes Basics</a></li>
<li><a class="post-link" href="/azure-app-services-architecture/" title="AWS Cloud Practitioner Certification Notes">Azure App Service Architecture</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>
<span class="copyleft">¬©</span> 2021-2023 Lucas Sousa</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
